***************
*** 118,129 ****
      }
  }
  
- variant gui description {Qt4 based cmake-gui} {
-     PortGroup qt4 1.0
      patchfiles-append patch-CMakeLists.txt.diff
-     configure.args-append --qt-gui --qt-qmake=${qt_qmake_cmd}
  }
  
  variant docs description {Build documentation: HTML and manpages} {
      configure.args-append \
          --mandir=share/man \
--- 118,150 ----
      }
  }
  
+ variant gui description {Build Qt-based cmake-gui} {
      patchfiles-append patch-CMakeLists.txt.diff
+     configure.args-append --qt-gui
  }
  
+ if {[variant_isset gui]} {
+ 
+     variant qt4 conflicts qt5 description {Build Qt GUI using Qt4} {
+         PortGroup qt4 1.0
+         configure.args-append --qt-qmake=${qt_qmake_cmd}
+     }
+ 
+     variant qt5 conflicts qt4 description {Build Qt GUI using Qt5} {
+         PortGroup qt5 1.0
+         configure.args-append --qt-qmake=${qt_qmake_cmd}
+     }
+ 
+     if {![variant_isset qt4] && ![variant_isset qt5]} {
+         default_variants +qt4
+     }
+ 
+     if {![variant_isset qt4] && ![variant_isset qt5]} {
+         ui_error "\n\nYou must select either the +qt4 or +qt5 variant when building the GUI.\n"
+         return -code error "Invalid variant selection"
+     }
+ }
+ 
  variant docs description {Build documentation: HTML and manpages} {
      configure.args-append \
          --mandir=share/man \
