diff --git libs/CMakeLists.txt libs/CMakeLists.txt
index c0576fe..d41b25a 100644
--- libs/CMakeLists.txt
+++ libs/CMakeLists.txt
@@ -4,16 +4,14 @@ add_subdirectory(oxygen)
 add_subdirectory(plasmaclock)
 
 if(${KDE_PLATFORM_PROFILE} STREQUAL "Desktop")
-   add_subdirectory(kdm)
-   add_subdirectory(plasmagenericshell)
-   if(NOT WIN32)
+   if(NOT WIN32 AND NOT CMAKE_SYSTEM_NAME MATCHES Darwin)
+        add_subdirectory(kdm)
+        add_subdirectory(plasmagenericshell)
         add_subdirectory(taskmanager)
-   endif(NOT WIN32)
+   endif(NOT WIN32 AND NOT CMAKE_SYSTEM_NAME MATCHES Darwin)
 endif(${KDE_PLATFORM_PROFILE} STREQUAL "Desktop")
 
-if(NOT WIN32)
-    if (NOT CMAKE_SYSTEM_NAME MATCHES Darwin)
-        add_subdirectory(ksysguard)
-    endif (NOT CMAKE_SYSTEM_NAME MATCHES Darwin)
-endif(NOT WIN32)
+if(NOT WIN32 AND NOT CMAKE_SYSTEM_NAME MATCHES Darwin)
+    add_subdirectory(ksysguard)
+endif(NOT WIN32 AND NOT CMAKE_SYSTEM_NAME MATCHES Darwin)
 
