# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

set kf5.project     breeze-icons
set kf5.framework   breeze-icons
PortGroup           kf5 1.1
version             ${kf5.version}

maintainers         gmail.com:rjvbertin mk openmaintainer

installs_libs       no
supported_archs     noarch

description         Breeze icon theme
long_description    Breeze icon theme, made exclusively out of scalable (SVG) images.
checksums           rmd160  19f1439ffd12d029c8af83d68bbf25db83c1a3da \
                    sha256  f4f8698bd01933e80d95dd9e6dab748ea889ecf34e12454d0847b300204a4698

subport ${name}-dark {
    description     Dark ${description}
    long_description \
                    Dark ${long_description}
}

if {${subport} eq "${name}"} {
    extract.post_args-append \
                    --exclude ${distname}/icons-dark
    post-extract {
        reinplace "s|add_subdirectory(icons-dark)|# no dark icons|g" ${worksrcpath}/CMakeLists.txt
    }
} else {
    extract.post_args-append \
                    --exclude ${distname}/icons
    post-extract {
        reinplace "s|add_subdirectory(icons)|# only dark icons|g" ${worksrcpath}/CMakeLists.txt
    }
}
post-extract {
    reinplace "s|add_subdirectory(autotests)|# no autotests|g" ${worksrcpath}/CMakeLists.txt
}
# removing the autotests allows to remove the Qt dependency
if {[info exists qt5_dependency]} {
    depends_lib-delete \
                    ${qt5_dependency}
    depends_lib-delete \
                    qt5-mac qt5
}

# Qt documentation for this package makes no sense
kf5.allow_docs_generation no

livecheck.type      regex
livecheck.version   ${kf5.branch}
livecheck.url       http://download.kde.org/stable/frameworks/
livecheck.regex     (5+(\\.\\d+)+)
