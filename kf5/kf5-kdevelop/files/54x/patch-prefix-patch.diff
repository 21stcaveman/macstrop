diff --git a/config-kdevelop.h.cmake b/config-kdevelop.h.cmake
index 941b8e7873..01046e0595 100644
--- a/config-kdevelop.h.cmake
+++ b/config-kdevelop.h.cmake
@@ -3,6 +3,8 @@
 
 /* config-kdevelop.h.  Generated by cmake from config-kdevelop.h.cmake */
 
+#define KDEVELOP_INSTALL_PREFIX "@CMAKE_INSTALL_PREFIX@"
+
 #cmakedefine01 KDEVELOP_SINGLE_APP
 
 #cmakedefine01 KF5SysGuard_FOUND
diff --git a/plugins/cmake/cmakeutils.cpp b/plugins/cmake/cmakeutils.cpp
index e88983a79b..ec49cc57ae 100644
--- a/plugins/cmake/cmakeutils.cpp
+++ b/plugins/cmake/cmakeutils.cpp
@@ -18,6 +18,7 @@
  * 02110-1301, USA.
  */
 
+#include "config-kdevelop.h"
 #include "cmakeutils.h"
 #include "cmakeprojectdata.h"
 
@@ -322,7 +323,10 @@ QString currentBuildType( KDevelop::IProject* project, int builddir )
 
 QString findExecutable()
 {
-    auto cmake = QStandardPaths::findExecutable(QStringLiteral("cmake"));
+    auto cmake = QStandardPaths::findExecutable(QStringLiteral("cmake"), QStringList(QStringLiteral(KDEVELOP_INSTALL_PREFIX"/bin")));
+    if (cmake.isEmpty()) {
+        cmake = QStandardPaths::findExecutable(QStringLiteral("cmake"));
+    }
 #ifdef Q_OS_WIN
     if (cmake.isEmpty())
         cmake = QStandardPaths::findExecutable(QStringLiteral("cmake"), {
@@ -363,7 +367,7 @@ KDevelop::Path currentInstallDir( KDevelop::IProject* project, int builddir )
 #ifdef Q_OS_WIN
         QStringLiteral("C:\\Program Files");
 #else
-        QStringLiteral("/usr/local");
+        QStringLiteral(KDEVELOP_INSTALL_PREFIX);
 #endif
     return KDevelop::Path(readBuildDirParameter( project, Config::Specific::cmakeInstallDirKey, defaultInstallDir, builddir ));
 }
diff --git a/plugins/cmake/cmakeutils.h b/plugins/cmake/cmakeutils.h
index 3642b94c21..ee78948d1a 100644
--- a/plugins/cmake/cmakeutils.h
+++ b/plugins/cmake/cmakeutils.h
@@ -116,7 +116,7 @@ namespace CMake
     KDEVCMAKECOMMON_EXPORT KDevelop::Path currentCMakeExecutable(KDevelop::IProject* project, int builddir = -1);
 
     /**
-     * @returns the current install dir for the given project or "/usr/local" as default value.
+     * @returns the current install dir for the given project or KDEVELOP_INSTALL_PREFIX as default value.
      */
     KDEVCMAKECOMMON_EXPORT KDevelop::Path currentInstallDir( KDevelop::IProject* project, int builddir = -1 );
     
diff --git a/plugins/manpage/manpageplugin.cpp b/plugins/manpage/manpageplugin.cpp
index 691c6e92d9..437c30d4d7 100644
--- a/plugins/manpage/manpageplugin.cpp
+++ b/plugins/manpage/manpageplugin.cpp
@@ -18,6 +18,7 @@
     Boston, MA 02110-1301, USA.
 */
 
+#include "config-kdevelop.h"
 #include "manpageplugin.h"
 
 #include "manpagedocumentation.h"
@@ -93,7 +94,8 @@ IDocumentation::Ptr ManPagePlugin::documentationForDeclaration( Declaration* dec
 
     // Don't show man-page documentation for files that are not in /usr/include, because then we
     // most probably will be confusing the global function-name with a local one
-    if (!dec->topContext()->url().str().startsWith(QLatin1String("/usr/")))
+    if (!dec->topContext()->url().str().startsWith(QLatin1String("/usr/"))
+            && !dec->topContext()->url().str().startsWith(QLatin1String(KDEVELOP_INSTALL_PREFIX)))
         return {};
 
     ///@todo Do more verification to make sure that we're showing the correct documentation for the declaration
diff --git a/plugins/qmljs/3rdparty/qtcreator-libs/qmljs/parser/changeLicense.py b/plugins/qmljs/3rdparty/qtcreator-libs/qmljs/parser/changeLicense.py
index b10ebbc938..18811c37c5 100755
--- a/plugins/qmljs/3rdparty/qtcreator-libs/qmljs/parser/changeLicense.py
+++ b/plugins/qmljs/3rdparty/qtcreator-libs/qmljs/parser/changeLicense.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python
+#!/usr/bin/env python
 import sys
 import os
 
diff --git a/plugins/qmljs/nodejsmodules/buffer.py b/plugins/qmljs/nodejsmodules/buffer.py
index e9eebf670b..f1829ddddf 100755
--- a/plugins/qmljs/nodejsmodules/buffer.py
+++ b/plugins/qmljs/nodejsmodules/buffer.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/child_process.py b/plugins/qmljs/nodejsmodules/child_process.py
index 9a58bc6408..115a0af08a 100755
--- a/plugins/qmljs/nodejsmodules/child_process.py
+++ b/plugins/qmljs/nodejsmodules/child_process.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/common.py b/plugins/qmljs/nodejsmodules/common.py
index 3e2ef6c5da..758f87cdd1 100644
--- a/plugins/qmljs/nodejsmodules/common.py
+++ b/plugins/qmljs/nodejsmodules/common.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/console.py b/plugins/qmljs/nodejsmodules/console.py
index 92b5e94938..eb684d3e81 100755
--- a/plugins/qmljs/nodejsmodules/console.py
+++ b/plugins/qmljs/nodejsmodules/console.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/crypto.py b/plugins/qmljs/nodejsmodules/crypto.py
index 0bf4401f7a..da49bed011 100755
--- a/plugins/qmljs/nodejsmodules/crypto.py
+++ b/plugins/qmljs/nodejsmodules/crypto.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/dgram.py b/plugins/qmljs/nodejsmodules/dgram.py
index c18a2f3bdc..85e9e20797 100755
--- a/plugins/qmljs/nodejsmodules/dgram.py
+++ b/plugins/qmljs/nodejsmodules/dgram.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/dns.py b/plugins/qmljs/nodejsmodules/dns.py
index 791cc6d765..77136b2e58 100755
--- a/plugins/qmljs/nodejsmodules/dns.py
+++ b/plugins/qmljs/nodejsmodules/dns.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/domain.py b/plugins/qmljs/nodejsmodules/domain.py
index c2944dadbc..11b3f396fb 100755
--- a/plugins/qmljs/nodejsmodules/domain.py
+++ b/plugins/qmljs/nodejsmodules/domain.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/ecmascript.py b/plugins/qmljs/nodejsmodules/ecmascript.py
index b7827ebeb8..8bf0d3d363 100755
--- a/plugins/qmljs/nodejsmodules/ecmascript.py
+++ b/plugins/qmljs/nodejsmodules/ecmascript.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/event.py b/plugins/qmljs/nodejsmodules/event.py
index 871b907663..dca15fe1fd 100755
--- a/plugins/qmljs/nodejsmodules/event.py
+++ b/plugins/qmljs/nodejsmodules/event.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/fs.py b/plugins/qmljs/nodejsmodules/fs.py
index e7e6ca11de..b413f3df65 100755
--- a/plugins/qmljs/nodejsmodules/fs.py
+++ b/plugins/qmljs/nodejsmodules/fs.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/http.py b/plugins/qmljs/nodejsmodules/http.py
index af25e1ce70..0bb7088b95 100755
--- a/plugins/qmljs/nodejsmodules/http.py
+++ b/plugins/qmljs/nodejsmodules/http.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/https.py b/plugins/qmljs/nodejsmodules/https.py
index 3c0b51e05f..1514b5336b 100755
--- a/plugins/qmljs/nodejsmodules/https.py
+++ b/plugins/qmljs/nodejsmodules/https.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/idltojs.py b/plugins/qmljs/nodejsmodules/idltojs.py
index bc7dca7f9e..8a2ef9ba1b 100755
--- a/plugins/qmljs/nodejsmodules/idltojs.py
+++ b/plugins/qmljs/nodejsmodules/idltojs.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/jsgenerator.py b/plugins/qmljs/nodejsmodules/jsgenerator.py
index 297458b54d..64ab431301 100644
--- a/plugins/qmljs/nodejsmodules/jsgenerator.py
+++ b/plugins/qmljs/nodejsmodules/jsgenerator.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 #
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
diff --git a/plugins/qmljs/nodejsmodules/net.py b/plugins/qmljs/nodejsmodules/net.py
index 6e8437f6f2..d28dac622f 100755
--- a/plugins/qmljs/nodejsmodules/net.py
+++ b/plugins/qmljs/nodejsmodules/net.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/os.py b/plugins/qmljs/nodejsmodules/os.py
index 59dbc0dd31..6b0447121b 100755
--- a/plugins/qmljs/nodejsmodules/os.py
+++ b/plugins/qmljs/nodejsmodules/os.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/path.py b/plugins/qmljs/nodejsmodules/path.py
index 36f4a81094..92679373a3 100755
--- a/plugins/qmljs/nodejsmodules/path.py
+++ b/plugins/qmljs/nodejsmodules/path.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/punycode.py b/plugins/qmljs/nodejsmodules/punycode.py
index fa7225917f..d5c409c8a0 100755
--- a/plugins/qmljs/nodejsmodules/punycode.py
+++ b/plugins/qmljs/nodejsmodules/punycode.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/querystring.py b/plugins/qmljs/nodejsmodules/querystring.py
index 29bf2b3a15..acf8cb3c12 100755
--- a/plugins/qmljs/nodejsmodules/querystring.py
+++ b/plugins/qmljs/nodejsmodules/querystring.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/readline.py b/plugins/qmljs/nodejsmodules/readline.py
index 95d51ec5f1..cdd4fba5f0 100755
--- a/plugins/qmljs/nodejsmodules/readline.py
+++ b/plugins/qmljs/nodejsmodules/readline.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/stream.py b/plugins/qmljs/nodejsmodules/stream.py
index 067490d95e..9b1fdb3120 100755
--- a/plugins/qmljs/nodejsmodules/stream.py
+++ b/plugins/qmljs/nodejsmodules/stream.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/string_decoder.py b/plugins/qmljs/nodejsmodules/string_decoder.py
index 932e3813b4..dd6465e746 100755
--- a/plugins/qmljs/nodejsmodules/string_decoder.py
+++ b/plugins/qmljs/nodejsmodules/string_decoder.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/tls.py b/plugins/qmljs/nodejsmodules/tls.py
index 800941a997..f359f6bccf 100755
--- a/plugins/qmljs/nodejsmodules/tls.py
+++ b/plugins/qmljs/nodejsmodules/tls.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/tty.py b/plugins/qmljs/nodejsmodules/tty.py
index 5300352634..b48b583873 100755
--- a/plugins/qmljs/nodejsmodules/tty.py
+++ b/plugins/qmljs/nodejsmodules/tty.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/url.py b/plugins/qmljs/nodejsmodules/url.py
index b669e67971..1066e9c103 100755
--- a/plugins/qmljs/nodejsmodules/url.py
+++ b/plugins/qmljs/nodejsmodules/url.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/util.py b/plugins/qmljs/nodejsmodules/util.py
index 61c80a484a..e1911bfc30 100755
--- a/plugins/qmljs/nodejsmodules/util.py
+++ b/plugins/qmljs/nodejsmodules/util.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/vm.py b/plugins/qmljs/nodejsmodules/vm.py
index 8ca7fd8a2d..74ef3882b7 100755
--- a/plugins/qmljs/nodejsmodules/vm.py
+++ b/plugins/qmljs/nodejsmodules/vm.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
diff --git a/plugins/qmljs/nodejsmodules/zlib.py b/plugins/qmljs/nodejsmodules/zlib.py
index be7cd75a8b..4daf4e5ab4 100755
--- a/plugins/qmljs/nodejsmodules/zlib.py
+++ b/plugins/qmljs/nodejsmodules/zlib.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # This file is part of qmljs, the QML/JS language support plugin for KDevelop
 # Copyright (c) 2014 Denis Steckelmacher <steckdenis@yahoo.fr>
