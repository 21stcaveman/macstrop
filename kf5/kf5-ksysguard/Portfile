# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

set kf5.project     ksysguard
set kf5.virtualPath plasma
PortGroup           kf5 1.1

subport kf5-libksysguard {
    set kf5.project libksysguard
    set kf5.virtualPath \
                    plasma
    # yes, we need to include the PortGroup here and at the toplevel!
    PortGroup       kf5 1.1
}

kf5.use_latest      plasma

maintainers         gmail.com:rjvbertin mk openmaintainer

if {${subport} eq "kf5-libksysguard"} {
    description     KF5 sysguard library
    long_description \
                    KF5 sysguard library, used by port:kf5-ksysguard
    checksums       rmd160  32b279d11da51b940aeec604138e05993087024d \
                    sha256  4c2647a63ab22c124ac2fd7fb341b73977dec5e1bf31c1c3e015b72675771011
    kf5.depends_frameworks \
                    kauth kconfig kconfigwidgets kcompletion \
                    kcoreaddons ki18n kiconthemes kservice \
                    kwidgetsaddons kwindowsystem plasma-framework
    depends_lib-append \
                    port:zlib
    platform darwin {
        variant kde4compat description {allow installation alongside KDE4's port:kde-l10n-*} {
            post-destroot {
                file delete -force ${destroot}${prefix}/share/locale
            }
        }
    }
} else {
    description     KF5 KSysGuard daemon
    long_description \
                    KF5 KSysGuard is a program to monitor various elements of your system, or any \
                    other remote system with the KSysGuard daemon (ksysguardd) installed. \
                    Currently the daemon has been ported to Linux, FreeBSD, Irix, NetBSD, \
                    OpenBSD, Solaris and Tru64 with varying degrees of completion.
    checksums       rmd160  312c324e84f6a255326ec446ecf894501cb19f15 \
                    sha256  589644d5a9ba6040c38bf21a942cfbcb5cfe1254d6e09563dea7bca225c2244a
    depends_lib-append \
                    port:kf5-libksysguard
    kf5.depends_frameworks \
                    kconfig kcoreaddons kdbusaddons ki18n \
                    kiconthemes kinit kio kitemviews knewstuff \
                    knotifications kwindowsystem

    kf5.allow_docs_generation \
                    no
    post-destroot {
        kf5.add_app_wrapper ksysguard5 ksysguard
        kf5.add_app_wrapper ksysguardd5 ksysguardd
    }
    platform darwin {
        long_description-append \
                    It runs on OS X but without providing any information of interest.
        notes-append \
                    "This port currently doesn't do anything"
        variant kde4compat description {allow installation alongside KDE4's port:kde-l10n-* and port:kde4-workspace} {
            post-destroot {
                if {[file exists ${destroot}${prefix}/share/doc/HTML]} {
                    file delete -force ${destroot}${prefix}/share/doc/HTML
                }
                file delete -force ${destroot}${prefix}/share/locale
            }
        }
    }
}


livecheck.type      regex
livecheck.url       http://download.kde.org/stable/plasma/
livecheck.regex     (5+(\\.\\d+)+)
