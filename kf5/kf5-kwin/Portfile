# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

platforms           linux
platform darwin {
    pre-fetch {
        ui_error "This port is not supported on OS X"
        return -code error "Not supported on OS X"
    }
}

set kf5.project     kwin
set kf5.virtualPath plasma
PortGroup           kf5 1.1

subport kf5-kscreenlocker {
    set kf5.project kscreenlocker
    set kf5.virtualPath \
                    plasma
    # yes, we need to include the PortGroup here and at the toplevel!
    PortGroup       kf5 1.1
    description     library and components for secure lock screen architecture. (Linux only)
    long_description \
                    KF5 ${description}
    checksums       rmd160  dcc6672f76c8401f712c4eebe736d0c8c63d3ab4 \
                    sha256  c6f0befcd230ec58f2994cad8c2f322f223e7422cfe33e641c664938e7960b06
    kf5.depends_frameworks \
                    kcrash kcmutils kdeclarative kglobalaccel \
                    ki18n kidletime knotifications ktextwidgets \
                    kwayland kwindowsystem kxmlgui solid
    # from system: prctl/procctl; XInput2; loginctl; waylandscanner; PAM
}

kf5.use_latest      plasma
maintainers         gmail.com:rjvbertin mk openmaintainer

if {${subport} eq "kf5-kwin"} {
    description     KDE window manager (Linux only)
    long_description \
                    KDE window manager for X11 and Wayland (Linux only).
    checksums       rmd160  06c42bbf8c05c56010d93def0ec614c749feb49a \
                    sha256  e4c358f828d9c30b7067f32a9efb515b99f6c8a9d16c116b13b1f271464d7884
    kf5.depends_frameworks \
                    kcmutils kcompletion kconfig kconfigwidgets \
                    kcoreaddons kcrash kdeclarative kglobalaccel \
                    ki18n kiconthemes kidletime kinit kio knewstuff \
                    knotifications kpackage kservice kwayland \
                    kwidgetsaddons kwindowsystem kxmlgui plasma-framework 
    depends_lib-append \
                    port:kf5-kdecoration \
                    port:kf5-kscreenlocker
    # from system: wayland; epoxy; XKB; X11; XCB; Freetype; FontConfig
}

kf5.allow_docs_generation no

# Dependencies expected through the host on Linux:
# libevdev-dev (optional), X11, Xft, XCB (shm, image, xkb, xinput), udev, synaptics (optional), OpenGL or OpenGLES
# plus all listed below in depends_lib



patch.pre_args      -Np1
# patchfiles-append   patch-disable-unwanted.diff


livecheck.type      regex
livecheck.url       http://download.kde.org/stable/plasma/
livecheck.regex     (5+(\\.\\d+)+)
