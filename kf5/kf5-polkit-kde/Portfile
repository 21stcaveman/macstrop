# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

set kf5.project     polkit-kde-agent-1
set kf5.virtualPath plasma
description         KDE authentication agent for policykit.
long_description    ${description}
checksums           rmd160  9f2be70018390001cb77f1787679dd0baa2220d8 \
                    sha256  8565ded2a1150279797130182a3c9d4b651d5c7f71262df67de1ea277b10a04f
PortGroup           kf5 1.1
name                kf5-polkit-kde
maintainers         gmail.com:rjvbertin mk openmaintainer
platforms           linux darwin

kf5.allow_docs_generation no

platform darwin {
    description-append \
                    Not useful on OS X
    long_description-append \
                    Not useful on OS X
}

kf5.depends_frameworks \
                    kcoreaddons kcrash kdbusaddons ki18n \
                    kiconthemes kwidgetsaddons kwindowsystem

depends_lib-append  path:lib/pkgconfig/polkit-qt5-1.pc:polkit-qt5

post-extract {
    xinstall -m 755 ${filespath}/Info.plist ${worksrcpath}/
}

patchfiles-append   patch-nongui.diff

post-patch {
    reinplace "s|@PLASMAVERSION@|${version}|g" ${worksrcpath}/Info.plist
}

livecheck.type      regex
livecheck.url       http://download.kde.org/stable/plasma/
livecheck.regex     (5+(\\.\\d+)+)
