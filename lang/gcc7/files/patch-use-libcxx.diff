--- gcc/orig.incpath.c	2017-02-20 12:38:16.000000000 +0100
+++ gcc/incpath.c	2017-05-11 19:02:37.000000000 +0200
@@ -129,6 +129,13 @@
   int relocated = cpp_relocated ();
   size_t len;
 
+  if (cxx_stdinc)
+    {
+      if (!getenv("LIBCPP_INCLUDE_PATH") && !getenv("GCC_FORCE_LIBSTDCPP"))
+        {
+          add_path (xstrdup ("@LLVMHEADERPATH@"), SYSTEM, true, false);
+        }
+    }
   if (iprefix && (len = cpp_GCC_INCLUDE_DIR_len) != 0)
     {
       /* Look for directories that start with the standard prefix.
@@ -474,6 +481,8 @@
   /* CPATH and language-dependent environment variables may add to the
      include chain.  */
   add_env_var_paths ("CPATH", BRACKET);
+  if (stdinc && cxx_stdinc && !getenv("GCC_FORCE_LIBSTDCPP"))
+    add_env_var_paths ("LIBCPP_INCLUDE_PATH", SYSTEM);
   add_env_var_paths (lang_env_vars[idx], SYSTEM);
 
   target_c_incpath.extra_pre_includes (sysroot, iprefix, stdinc);
--- gcc/cp/orig.g++spec.c	2017-01-01 13:07:43.000000000 +0100
+++ gcc/cp/g++spec.c	2017-05-19 16:44:12.000000000 +0200
@@ -48,9 +48,18 @@
 #ifndef LIBSTDCXX
 #define LIBSTDCXX "stdc++"
 #endif
+// libc++ support:
+#ifndef LIBCXX
+#define LIBCXX "c++"
+#define LIBCXXABI "c++abi"
+// using libsupc++ is a hack, probably to be dropped on systems that have a new enough libc++
+// which has `operator delete(void*, unsigned long)`
+#define LIBSUPCXX "supc++"
+#endif
 #ifndef LIBSTDCXX_PROFILE
 #define LIBSTDCXX_PROFILE LIBSTDCXX
 #endif
+
 #ifndef LIBSTDCXX_STATIC
 #define LIBSTDCXX_STATIC NULL
 #endif
@@ -342,15 +351,34 @@
 	  j++;
 	}
 #endif
-      generate_option (OPT_l,
-		       saw_profile_flag ? LIBSTDCXX_PROFILE : LIBSTDCXX, 1,
-		       CL_DRIVER, &new_decoded_options[j]);
-      added_libraries++;
-      j++;
-      /* Add target-dependent static library, if necessary.  */
-      if ((static_link || library > 1) && LIBSTDCXX_STATIC != NULL)
+    // NOT checking for the existence of LIBCXXABI and LIBSUPCXX on purpose
+	 if (getenv ("GCC_FORCE_LIBSTDCPP")) {
+		 fprintf(stderr, "GCC_FORCE_LIBSTDCPP - using -l%s instead of -l%s -l%s -l%s\n",
+                 (saw_profile_flag ? LIBSTDCXX_PROFILE : LIBSTDCXX), LIBCXX, LIBCXXABI, LIBSUPCXX);
+		 generate_option (OPT_l,
+				  saw_profile_flag ? LIBSTDCXX_PROFILE : LIBSTDCXX, 1,
+				  CL_DRIVER, &new_decoded_options[j]);
+		 added_libraries++;
+		 j++;
+	 } else {
+		 generate_option (OPT_l, LIBCXX, 1,
+				  CL_DRIVER, &new_decoded_options[j]);
+		 added_libraries++;
+		 j++;
+		 // add -lc++abi and -lsupc++
+		 generate_option (OPT_l, LIBCXXABI, 1,
+				  CL_DRIVER, &new_decoded_options[j]);
+		 added_libraries++;
+		 j++;
+		 generate_option (OPT_l, LIBSUPCXX, 1,
+				  CL_DRIVER, &new_decoded_options[j]);
+		 added_libraries++;
+		 j++;
+	 }
+	 /* Add target-dependent static library, if necessary.  */
+	 if ((static_link || library > 1) && (LIBSTDCXX_STATIC != NULL || getenv("GCC_IS_BUILDING_ITSELF")))
 	{
-	  generate_option (OPT_l, LIBSTDCXX_STATIC, 1,
+	  generate_option (OPT_l, LIBSTDCXX_STATIC ? LIBSTDCXX_STATIC : LIBSTDCXX, 1,
 			   CL_DRIVER, &new_decoded_options[j]);
 	  added_libraries++;
 	  j++;
--- gcc/c-family/orig.c.opt	2017-03-31 16:24:27.000000000 +0200
+++ gcc/c-family/c.opt	2017-10-30 21:55:23.000000000 +0100
@@ -1992,6 +1992,14 @@
 C ObjC Alias(std=c11)
 Conform to the ISO 2011 C standard.
 
+stdlib=libc++
+C++ ObjC++
+Specify the C++ standard library to use: LLVM libc++
+
+stdlib=libstdc++
+C++ ObjC++
+Specify the C++ standard library to use: GNU libstdc++
+
 traditional
 Driver
 
