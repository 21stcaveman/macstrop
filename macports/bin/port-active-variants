#!/bin/sh

PORT=""
OPTS=""
MULTIPLE=0

while [ $# != 0 ] ;do
	case $1 in
		-*)
			OPTS="${OPTS} $1"
			;;
		*)
			if [ "${PORT}" != "" ];then
				MULTIPLE=1
			fi
			PORT="${PORT} $1"
			;;
	esac
	shift
done

DNAME="`dirname $0`"

if [ "${PORT}" != "" ] ;then
	for p in $PORT ;do
		INSTALLED=`port installed ${p} | fgrep '(active)'`
		VARIANTS="`echo ${INSTALLED} | sed -e 's|[^\+]*\(+.*\) (active)|\1|g'`"
		if [ ${MULTIPLE} = 0 ] ;then
			echo "${VARIANTS}"
		else
			echo "${p}: ${VARIANTS}"
		fi
	done
else
	echo "Usage: `basename $0` [-options] <port1> [port2 [port3 [...]]]"
	echo "Prints the variants of the currently active given port(s)"
fi
