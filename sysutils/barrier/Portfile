PortSystem      1.0
PortGroup       cmake 1.1
PortGroup       github 1.0
PortGroup       LTO 1.0
PortGroup       qt5 1.0
PortGroup       locale_select 1.0

### MacStrop Only ###
# Enable HFS compression of the workdir if the compress_workdir PortGroup is installed
if {[file exists ${filespath}/../../../_resources/port1.0/group/compress_workdir-1.0.tcl]} {
    PortGroup   compress_workdir 1.0
}
###

name            barrier
subport         "${name}-devel" {}

if {${subport} eq "${name}"} {
    github.setup    debauchee barrier 2.3.2 v
    checksums       rmd160  ed64d5d48e4f7680ea06dc510e6c315cce9d17f7 \
                    sha256  be49ced4f66379dff8121b49d458a5d316c5a36d306e991e1e25cf1f3d57d5df
#                     size    7244051
} else {
    github.setup    debauchee barrier 2d2e92989c3493e54096c4e68c3139911ef40ce9
    # v2.3.2-51-g2d2e929
    version         2.3.2.51
    distname        barrier-git
    fetch.type      git
}

categories      sysutils
platforms       macosx linux
license         {GPL-2 OpenSSLException}
maintainers     gmail.com:rjvbertin openmaintainer
description     Software KVM switch
long_description Barrier is software that mimics the functionality of a KVM switch, which historically \
                would allow you to use a single keyboard and mouse to control multiple computers by \
                turning a dial on a box to switch the machine you're controlling at any given moment. \
                Barrier does this in software, allowing you to tell it which machine to control by moving \
                your mouse to the edge of the screen, or by using a keypress to switch focus to a different system.

patch.pre_args  -Np1

depends_build-append \
                port:pkgconfig
depends_lib-append \
                port:avahi \
                port:curl

compiler.cxx_standard 2014

configure.args-append \
                -DBARRIER_BUILD_INSTALLER=OFF \
                -DCMAKE_MACOSX_RPATH=ON \

platform linux {
    configure.args-append \
        cmake.install_rpath-prepend \
                ${prefix}/lib/${build_arch}-linux-gnu \
                ${qt_libs_dir}
}

cmake.save_configure_cmd "log too"
